<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <title>install_gitlab_from_source_on_CentOS6.6-Minimal</title>
      <style>.markdown-preview, .markdown-preview[data-use-github-style] { font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 1.6; word-wrap: break-word; overflow: scroll; box-sizing: border-box; padding: 20px; background-color: rgb(255, 255, 255); }
.markdown-preview > :first-child, .markdown-preview[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview > :last-child, .markdown-preview[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview a:not([href]), .markdown-preview[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview .absent, .markdown-preview[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview .anchor, .markdown-preview[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview .anchor:focus, .markdown-preview[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview h1, .markdown-preview[data-use-github-style] h1, .markdown-preview h2, .markdown-preview[data-use-github-style] h2, .markdown-preview h3, .markdown-preview[data-use-github-style] h3, .markdown-preview h4, .markdown-preview[data-use-github-style] h4, .markdown-preview h5, .markdown-preview[data-use-github-style] h5, .markdown-preview h6, .markdown-preview[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview h1 .octicon-link, .markdown-preview[data-use-github-style] h1 .octicon-link, .markdown-preview h2 .octicon-link, .markdown-preview[data-use-github-style] h2 .octicon-link, .markdown-preview h3 .octicon-link, .markdown-preview[data-use-github-style] h3 .octicon-link, .markdown-preview h4 .octicon-link, .markdown-preview[data-use-github-style] h4 .octicon-link, .markdown-preview h5 .octicon-link, .markdown-preview[data-use-github-style] h5 .octicon-link, .markdown-preview h6 .octicon-link, .markdown-preview[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview h1:hover .anchor, .markdown-preview[data-use-github-style] h1:hover .anchor, .markdown-preview h2:hover .anchor, .markdown-preview[data-use-github-style] h2:hover .anchor, .markdown-preview h3:hover .anchor, .markdown-preview[data-use-github-style] h3:hover .anchor, .markdown-preview h4:hover .anchor, .markdown-preview[data-use-github-style] h4:hover .anchor, .markdown-preview h5:hover .anchor, .markdown-preview[data-use-github-style] h5:hover .anchor, .markdown-preview h6:hover .anchor, .markdown-preview[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview h1:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview h2:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview h3:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview h4:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview h5:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview h6:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview h1 tt, .markdown-preview[data-use-github-style] h1 tt, .markdown-preview h2 tt, .markdown-preview[data-use-github-style] h2 tt, .markdown-preview h3 tt, .markdown-preview[data-use-github-style] h3 tt, .markdown-preview h4 tt, .markdown-preview[data-use-github-style] h4 tt, .markdown-preview h5 tt, .markdown-preview[data-use-github-style] h5 tt, .markdown-preview h6 tt, .markdown-preview[data-use-github-style] h6 tt, .markdown-preview h1 code, .markdown-preview[data-use-github-style] h1 code, .markdown-preview h2 code, .markdown-preview[data-use-github-style] h2 code, .markdown-preview h3 code, .markdown-preview[data-use-github-style] h3 code, .markdown-preview h4 code, .markdown-preview[data-use-github-style] h4 code, .markdown-preview h5 code, .markdown-preview[data-use-github-style] h5 code, .markdown-preview h6 code, .markdown-preview[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview h1, .markdown-preview[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); }
.markdown-preview h1 .anchor, .markdown-preview[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview h2, .markdown-preview[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); }
.markdown-preview h2 .anchor, .markdown-preview[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview h3, .markdown-preview[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview h3 .anchor, .markdown-preview[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview h4, .markdown-preview[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview h4 .anchor, .markdown-preview[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview h5, .markdown-preview[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview h5 .anchor, .markdown-preview[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview h6, .markdown-preview[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview h6 .anchor, .markdown-preview[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview p, .markdown-preview[data-use-github-style] p, .markdown-preview blockquote, .markdown-preview[data-use-github-style] blockquote, .markdown-preview ul, .markdown-preview[data-use-github-style] ul, .markdown-preview ol, .markdown-preview[data-use-github-style] ol, .markdown-preview dl, .markdown-preview[data-use-github-style] dl, .markdown-preview table, .markdown-preview[data-use-github-style] table, .markdown-preview pre, .markdown-preview[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview hr, .markdown-preview[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; border: 0px none; background-color: rgb(231, 231, 231); }
.markdown-preview ul, .markdown-preview[data-use-github-style] ul, .markdown-preview ol, .markdown-preview[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview ul.no-list, .markdown-preview[data-use-github-style] ul.no-list, .markdown-preview ol.no-list, .markdown-preview[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview ul ul, .markdown-preview[data-use-github-style] ul ul, .markdown-preview ul ol, .markdown-preview[data-use-github-style] ul ol, .markdown-preview ol ol, .markdown-preview[data-use-github-style] ol ol, .markdown-preview ol ul, .markdown-preview[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview li > p, .markdown-preview[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview dl, .markdown-preview[data-use-github-style] dl { padding: 0px; }
.markdown-preview dl dt, .markdown-preview[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview dl dd, .markdown-preview[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview blockquote, .markdown-preview[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left-width: 4px; border-left-style: solid; border-left-color: rgb(221, 221, 221); }
.markdown-preview blockquote > :first-child, .markdown-preview[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview blockquote > :last-child, .markdown-preview[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview table, .markdown-preview[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: normal; }
.markdown-preview table th, .markdown-preview[data-use-github-style] table th { font-weight: bold; }
.markdown-preview table th, .markdown-preview[data-use-github-style] table th, .markdown-preview table td, .markdown-preview[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview table tr, .markdown-preview[data-use-github-style] table tr { border-top-width: 1px; border-top-style: solid; border-top-color: rgb(204, 204, 204); background-color: rgb(255, 255, 255); }
.markdown-preview table tr:nth-child(2n), .markdown-preview[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview img, .markdown-preview[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview .emoji, .markdown-preview[data-use-github-style] .emoji { max-width: none; }
.markdown-preview span.frame, .markdown-preview[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview span.frame > span, .markdown-preview[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview span.frame span img, .markdown-preview[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview span.frame span span, .markdown-preview[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview span.align-center, .markdown-preview[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview span.align-center > span, .markdown-preview[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview span.align-center span img, .markdown-preview[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview span.align-right, .markdown-preview[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview span.align-right > span, .markdown-preview[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview span.align-right span img, .markdown-preview[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview span.float-left, .markdown-preview[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview span.float-left span, .markdown-preview[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview span.float-right, .markdown-preview[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview span.float-right > span, .markdown-preview[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview code, .markdown-preview[data-use-github-style] code, .markdown-preview tt, .markdown-preview[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; border-radius: 3px; background-color: rgba(0, 0, 0, 0.0392157); }
.markdown-preview code::before, .markdown-preview[data-use-github-style] code::before, .markdown-preview tt::before, .markdown-preview[data-use-github-style] tt::before, .markdown-preview code::after, .markdown-preview[data-use-github-style] code::after, .markdown-preview tt::after, .markdown-preview[data-use-github-style] tt::after { letter-spacing: -0.2em; content: ' '; }
.markdown-preview code br, .markdown-preview[data-use-github-style] code br, .markdown-preview tt br, .markdown-preview[data-use-github-style] tt br { display: none; }
.markdown-preview del code, .markdown-preview[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview pre > code, .markdown-preview[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; border: 0px; background: transparent; }
.markdown-preview .highlight, .markdown-preview[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview .highlight pre, .markdown-preview[data-use-github-style] .highlight pre, .markdown-preview pre, .markdown-preview[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; border-radius: 3px; background-color: rgb(247, 247, 247); }
.markdown-preview .highlight pre, .markdown-preview[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview pre, .markdown-preview[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview pre code, .markdown-preview[data-use-github-style] pre code, .markdown-preview pre tt, .markdown-preview[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; border: 0px; background-color: transparent; }
.markdown-preview pre code::before, .markdown-preview[data-use-github-style] pre code::before, .markdown-preview pre tt::before, .markdown-preview[data-use-github-style] pre tt::before, .markdown-preview pre code::after, .markdown-preview[data-use-github-style] pre code::after, .markdown-preview pre tt::after, .markdown-preview[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview kbd, .markdown-preview[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; border-style: solid; border-width: 1px; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; background-color: rgb(252, 252, 252); }
.markdown-preview, .markdown-preview[data-use-github-style], .markdown-preview code, .markdown-preview[data-use-github-style] code { color: rgb(51, 51, 51); }
.markdown-preview h1, .markdown-preview[data-use-github-style] h1, .markdown-preview h2, .markdown-preview[data-use-github-style] h2, .markdown-preview h3, .markdown-preview[data-use-github-style] h3, .markdown-preview h4, .markdown-preview[data-use-github-style] h4, .markdown-preview h5, .markdown-preview[data-use-github-style] h5, .markdown-preview h6, .markdown-preview[data-use-github-style] h6 { -webkit-font-smoothing: antialiased; cursor: text; }
.markdown-preview > h1:first-child, .markdown-preview[data-use-github-style] > h1:first-child, .markdown-preview > h1:first-child + h2, .markdown-preview[data-use-github-style] > h1:first-child + h2, .markdown-preview > h2:first-child, .markdown-preview[data-use-github-style] > h2:first-child, .markdown-preview > h3:first-child, .markdown-preview[data-use-github-style] > h3:first-child, .markdown-preview > h4:first-child, .markdown-preview[data-use-github-style] > h4:first-child, .markdown-preview > h5:first-child, .markdown-preview[data-use-github-style] > h5:first-child, .markdown-preview > h6:first-child, .markdown-preview[data-use-github-style] > h6:first-child { margin-top: 0px; padding-top: 0px; }
.markdown-preview a, .markdown-preview[data-use-github-style] a, .markdown-preview a code, .markdown-preview[data-use-github-style] a code { color: rgb(65, 131, 196); }
.markdown-preview a:first-child h1, .markdown-preview[data-use-github-style] a:first-child h1, .markdown-preview a:first-child h2, .markdown-preview[data-use-github-style] a:first-child h2, .markdown-preview a:first-child h3, .markdown-preview[data-use-github-style] a:first-child h3, .markdown-preview a:first-child h4, .markdown-preview[data-use-github-style] a:first-child h4, .markdown-preview a:first-child h5, .markdown-preview[data-use-github-style] a:first-child h5, .markdown-preview a:first-child h6, .markdown-preview[data-use-github-style] a:first-child h6 { margin-top: 0px; padding-top: 0px; }
.markdown-preview h1 + p, .markdown-preview[data-use-github-style] h1 + p, .markdown-preview h2 + p, .markdown-preview[data-use-github-style] h2 + p, .markdown-preview h3 + p, .markdown-preview[data-use-github-style] h3 + p, .markdown-preview h4 + p, .markdown-preview[data-use-github-style] h4 + p, .markdown-preview h5 + p, .markdown-preview[data-use-github-style] h5 + p, .markdown-preview h6 + p, .markdown-preview[data-use-github-style] h6 + p { margin-top: 0px; }
.markdown-preview li p.first, .markdown-preview[data-use-github-style] li p.first { display: inline-block; }
.markdown-preview ul li > :first-child, .markdown-preview[data-use-github-style] ul li > :first-child, .markdown-preview ol li > :first-child, .markdown-preview[data-use-github-style] ol li > :first-child, .markdown-preview ul li ul:first-of-type, .markdown-preview[data-use-github-style] ul li ul:first-of-type, .markdown-preview ol li ul:first-of-type, .markdown-preview[data-use-github-style] ol li ul:first-of-type { margin-top: 0px; }
.markdown-preview ol > li, .markdown-preview[data-use-github-style] ol > li { list-style-type: decimal; }
.markdown-preview ul > li, .markdown-preview[data-use-github-style] ul > li { list-style-type: disc; }
.markdown-preview dl dt:first-child, .markdown-preview[data-use-github-style] dl dt:first-child { padding: 0px; }
.markdown-preview dl dt > :first-child, .markdown-preview[data-use-github-style] dl dt > :first-child { margin-top: 0px; }
.markdown-preview dl dt > :last-child, .markdown-preview[data-use-github-style] dl dt > :last-child { margin-bottom: 0px; }
.markdown-preview dl dd > :first-child, .markdown-preview[data-use-github-style] dl dd > :first-child { margin-top: 0px; }
.markdown-preview dl dd > :last-child, .markdown-preview[data-use-github-style] dl dd > :last-child { margin-bottom: 0px; }
.markdown-preview blockquote p, .markdown-preview[data-use-github-style] blockquote p { font-size: 16px; line-height: 1.5; }
.markdown-preview pre.editor-colors, .markdown-preview[data-use-github-style] pre.editor-colors { padding: 16px; overflow: auto; font-size: 84%; line-height: 1.45; border-radius: 3px; background-color: rgb(40, 44, 52); }
.markdown-preview pre.editor-colors, .markdown-preview[data-use-github-style] pre.editor-colors { margin-bottom: 16px; word-break: normal; }
.markdown-preview code, .markdown-preview[data-use-github-style] code, .markdown-preview tt, .markdown-preview[data-use-github-style] tt, .markdown-preview pre.editor-colors, .markdown-preview[data-use-github-style] pre.editor-colors { font-family: Consolas, 'Liberation Mono', Courier, monospace; }
.markdown-preview .emoji, .markdown-preview[data-use-github-style] .emoji { height: 20px; width: 20px; }
.markdown-preview { font-size: 1.25em; color: rgb(200, 204, 213); background-color: rgb(47, 51, 61); }
.markdown-preview h1, .markdown-preview h2 { color: inherit; border-color: rgb(24, 26, 31); }
.markdown-preview a { color: rgb(100, 148, 237); }
.markdown-preview hr { background-color: rgb(67, 73, 86); }
.markdown-preview blockquote { color: rgb(157, 165, 180); border-left-color: rgba(157, 165, 180, 0.6); }
.markdown-preview table th, .markdown-preview table td { border-color: rgb(24, 26, 31); }
.markdown-preview table th { background-color: rgb(53, 59, 69); }
.markdown-preview table tr { background-color: rgb(47, 51, 61); }
.markdown-preview table tr:nth-child(2n) { background-color: rgb(40, 44, 52); }
.markdown-preview code { color: rgb(243, 244, 246); border-color: rgb(24, 26, 31); background-color: rgb(62, 68, 81); background-clip: padding-box; }
.markdown-preview pre.editor-colors::shadow .line.cursor-line { background-color: transparent; }
.bracket-matcher .region {
  border-bottom: 1px dotted lime;
  position: absolute;
}

.spell-check-misspelling .region {
  border-bottom: 1px dashed rgba(250, 128, 114, 0.5);
}

pre.editor-colors,
.host {
  background-color: #282c34;
  color: #abb2bf;
}
pre.editor-colors .line.cursor-line,
.host .line.cursor-line {
  background-color: rgba(153, 187, 255, 0.04);
}
pre.editor-colors .invisible,
.host .invisible {
  color: #abb2bf;
}
pre.editor-colors .cursor,
.host .cursor {
  border-left: 2px solid #528bff;
}
pre.editor-colors .selection .region,
.host .selection .region {
  background-color: #3e4451;
}
pre.editor-colors .bracket-matcher .region,
.host .bracket-matcher .region {
  border-bottom: 1px solid #528bff;
  box-sizing: border-box;
  background-color: #353b45;
}
pre.editor-colors .invisible-character,
.host .invisible-character {
  color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .indent-guide,
.host .indent-guide {
  color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .wrap-guide,
.host .wrap-guide {
  background-color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .gutter .line-number,
.host .gutter .line-number {
  color: #636d83;
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .gutter .line-number.git-line-removed:before,
.host .gutter .line-number.git-line-removed:before {
  bottom: -3px;
}
pre.editor-colors .gutter .line-number.git-line-removed:after,
.host .gutter .line-number.git-line-removed:after {
  content: "";
  position: absolute;
  left: 0px;
  bottom: 0px;
  width: 25px;
  border-bottom: 1px dotted rgba(224, 82, 82, 0.5);
  pointer-events: none;
}
pre.editor-colors .gutter .line-number.cursor-line,
.host .gutter .line-number.cursor-line {
  color: #abb2bf;
  background-color: #2c313a;
}
pre.editor-colors .gutter .line-number.cursor-line-no-selection,
.host .gutter .line-number.cursor-line-no-selection {
  background-color: transparent;
}
pre.editor-colors .gutter .line-number .icon-right,
.host .gutter .line-number .icon-right {
  color: #abb2bf;
}
pre.editor-colors .gutter .line-number .icon-right,
.host .gutter .line-number .icon-right {
  color: #abb2bf;
}
pre.editor-colors .gutter .line-number.folded,
.host .gutter .line-number.folded,
pre.editor-colors .gutter .line-number:after,
.host .gutter .line-number:after,
pre.editor-colors .fold-marker:after,
.host .fold-marker:after {
  color: #abb2bf;
}
.comment {
  color: #5c6370;
  font-style: italic;
}
.entity.name.type {
  color: #e5c07b;
}
.entity.other.inherited-class {
  color: #98c379;
}
.keyword {
  color: #c678dd;
}
.keyword.control {
  color: #c678dd;
}
.keyword.operator {
  color: #abb2bf;
}
.keyword.other.special-method {
  color: #61afef;
}
.keyword.other.unit {
  color: #d19a66;
}
.storage {
  color: #c678dd;
}
.storage.type.annotation,
.storage.type.primitive {
  color: #c678dd;
}
.storage.modifier.package,
.storage.modifier.import {
  color: #abb2bf;
}
.constant {
  color: #d19a66;
}
.constant.variable {
  color: #d19a66;
}
.constant.character.escape {
  color: #56b6c2;
}
.constant.numeric {
  color: #d19a66;
}
.constant.other.color {
  color: #56b6c2;
}
.constant.other.symbol {
  color: #56b6c2;
}
.variable {
  color: #e06c75;
}
.variable.interpolation {
  color: #be5046;
}
.variable.parameter {
  color: #abb2bf;
}
.invalid.illegal {
  background-color: #e06c75;
  color: #282c34;
}
.string {
  color: #98c379;
}
.string.regexp {
  color: #56b6c2;
}
.string.regexp .source.ruby.embedded {
  color: #e5c07b;
}
.string.other.link {
  color: #e06c75;
}
.punctuation.definition.comment {
  color: #5c6370;
}
.punctuation.definition.method-parameters,
.punctuation.definition.function-parameters,
.punctuation.definition.parameters,
.punctuation.definition.separator,
.punctuation.definition.seperator,
.punctuation.definition.array {
  color: #abb2bf;
}
.punctuation.definition.heading,
.punctuation.definition.identity {
  color: #61afef;
}
.punctuation.definition.bold {
  color: #e5c07b;
  font-weight: bold;
}
.punctuation.definition.italic {
  color: #c678dd;
  font-style: italic;
}
.punctuation.section.embedded {
  color: #be5046;
}
.punctuation.section.method,
.punctuation.section.class,
.punctuation.section.inner-class {
  color: #abb2bf;
}
.support.class {
  color: #e5c07b;
}
.support.type {
  color: #56b6c2;
}
.support.function {
  color: #56b6c2;
}
.support.function.any-method {
  color: #61afef;
}
.entity.name.function {
  color: #61afef;
}
.entity.name.class,
.entity.name.type.class {
  color: #e5c07b;
}
.entity.name.section {
  color: #61afef;
}
.entity.name.tag {
  color: #e06c75;
}
.entity.other.attribute-name {
  color: #d19a66;
}
.entity.other.attribute-name.id {
  color: #61afef;
}
.meta.class {
  color: #e5c07b;
}
.meta.class.body {
  color: #abb2bf;
}
.meta.method-call,
.meta.method {
  color: #abb2bf;
}
.meta.definition.variable {
  color: #e06c75;
}
.meta.link {
  color: #d19a66;
}
.meta.require {
  color: #61afef;
}
.meta.selector {
  color: #c678dd;
}
.meta.separator {
  background-color: #373b41;
  color: #abb2bf;
}
.meta.tag {
  color: #abb2bf;
}
.none {
  color: #abb2bf;
}
.markup.bold {
  color: #d19a66;
  font-weight: bold;
}
.markup.changed {
  color: #c678dd;
}
.markup.deleted {
  color: #e06c75;
}
.markup.italic {
  color: #c678dd;
  font-style: italic;
}
.markup.heading .punctuation.definition.heading {
  color: #61afef;
}
.markup.inserted {
  color: #98c379;
}
.markup.list {
  color: #e06c75;
}
.markup.quote {
  color: #d19a66;
}
.markup.raw.inline {
  color: #98c379;
}
.source.cs .keyword.operator {
  color: #c678dd;
}
.source.css .property-name,
.source.css .property-value {
  color: #828997;
}
.source.css .property-name.support,
.source.css .property-value.support {
  color: #abb2bf;
}
.source.gfm .markup {
  -webkit-font-smoothing: auto;
}
.source.gfm .markup.heading {
  color: #e06c75;
}
.source.gfm .markup.link {
  color: #c678dd;
}
.source.gfm .link .entity {
  color: #61afef;
}
.source.ini .keyword.other.definition.ini {
  color: #e06c75;
}
.source.java .storage.modifier.import {
  color: #e5c07b;
}
.source.java .storage.type {
  color: #e5c07b;
}
.source.java-properties .meta.key-pair {
  color: #e06c75;
}
.source.java-properties .meta.key-pair > .punctuation {
  color: #abb2bf;
}
.source.json .meta.structure.dictionary.json > .string.quoted.json {
  color: #e06c75;
}
.source.json .meta.structure.dictionary.json > .string.quoted.json > .punctuation.string {
  color: #e06c75;
}
.source.json .meta.structure.dictionary.json > .value.json > .string.quoted.json,
.source.json .meta.structure.array.json > .value.json > .string.quoted.json,
.source.json .meta.structure.dictionary.json > .value.json > .string.quoted.json > .punctuation,
.source.json .meta.structure.array.json > .value.json > .string.quoted.json > .punctuation {
  color: #98c379;
}
.source.json .meta.structure.dictionary.json > .constant.language.json,
.source.json .meta.structure.array.json > .constant.language.json {
  color: #56b6c2;
}
.source.ruby .constant.other.symbol > .punctuation {
  color: inherit;
}
.source.python .keyword.operator.logical.python {
  color: #c678dd;
}
.source.python .variable.parameter {
  color: #d19a66;
}
</style>
  </head>
  <body class='markdown-preview'><h1 id="gitlab-install-guide">GitLab Install Guide</h1>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Distribution&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;CentOS6.5/6&nbsp;Minimal</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>GitLab&nbsp;version&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;7.13.2</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Web&nbsp;Server&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Nginx&nbsp;1.9.3</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Database&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;MariaDB&nbsp;10.1.5</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Contributors&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;@lvfeng1130</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Additional&nbsp;Notes&nbsp;&nbsp;:&nbsp;In&nbsp;order&nbsp;to&nbsp;install&nbsp;gitlab&nbsp;under&nbsp;a&nbsp;circumstance&nbsp;that&nbsp;Linux&nbsp;server&nbsp;has&nbsp;no&nbsp;internet&nbsp;access,&nbsp;All&nbsp;reiled&nbsp;code&nbsp;or&nbsp;pacakges&nbsp;are&nbsp;downloaded&nbsp;via&nbsp;chrome,&nbsp;A&nbsp;great&nbsp;thanks&nbsp;to&nbsp;the&nbsp;community&nbsp;for&nbsp;providing&nbsp;such&nbsp;an&nbsp;amazing&nbsp;product,&nbsp;also&nbsp;a&nbsp;lot&nbsp;thanks&nbsp;to&nbsp;these&nbsp;who&nbsp;helped&nbsp;on&nbsp;the&nbsp;guides.</span></span></span></div></pre><h2 id="overview">Overview</h2>
<p>The installation manual base itself on <a href="https://github.com/gitlabhq/gitlab-recipes/tree/master/install/centos">gitlab-recipes Install Guild</a>,
It attempts to install Gitlab from ground up with http access in chrome and only yum local repository.
Some of the install procedures are from <a href="https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/install/installation.md">official install guide</a></p>
<h2 id="important-notes">Important Notes</h2>
<p>The following steps have been known to work and should be followed from up to bottom.
If you deviate from this guide, do it with caution and make sure you don&#39;t violate
any assumptions GitLab makes about its environment. I personally tried this on REHL6.3 but got stuck at the installation of gem charlock_holmes.
(You may follow the manual here <a href="https://github.com/gitlabhq/gitlab-recipes/tree/master/install/centos">gitlab-recipes Install Guild</a>, it claim to be tested on RHEL6.3)</p>
<h2 id="add-disk-space">Add disk space</h2>
<h3 id="extend-the-size-of-lvm-partition-opt">Extend the size of lvm partition /opt</h3>
<ol>
<li>Create the physical volume<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>pvcreate&nbsp;/dev/sdb</span></span></span></div></pre></li>
<li>Add pv /dev/sdc into  the volume group &#39;systemvg&#39; which includes partition /opt<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>vgextend&nbsp;systemvg&nbsp;/dev/sdb</span></span></span></div></pre></li>
<li>extend logical volume systemvg-optlv<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>lvextend&nbsp;-L&nbsp;100G&nbsp;/dev/mapper/systemvg-optlv</span></span></span></div></pre></li>
<li>resize to file system (to see in df -h)<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>resize2fs&nbsp;/dev/mapper/systemvg-optlv</span></span></span></div></pre></li>
</ol>
<h2 id="install-the-operating-system-centos6-6-minimal-">Install the operating system (CentOS6.6 Minimal)</h2>
<blockquote>
<p>I start with a completely clean CentOS6.6 &quot;minimal&quot; installation which can be accomplished by downloading from different mirrors.
e.g.</p>
</blockquote>
<ul>
<li><a href="http://mirrors.aliyun.com/">Aliyun</a></li>
<li><a href="http://mirrors.163.com/">NetEase</a></li>
<li><a href="http://mirrors.sohu.com/">Sohu</a></li>
</ul>
<h2 id="install-backbone-software-and-dependencies">Install backbone software and dependencies</h2>
<h3 id="development-tools">Development tools</h3>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>yum&nbsp;groupinstall&nbsp;&quot;Development&nbsp;tools&quot;</span></span></span></div></pre><h3 id="requied-headers-files-for-git">Requied headers files for git</h3>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>yum&nbsp;-y&nbsp;install&nbsp;gcc&nbsp;gcc-c++&nbsp;zlib-devel&nbsp;perl-ExtUtils-MakeMaker&nbsp;autoconf&nbsp;kernel-devel&nbsp;tcl&nbsp;tcl-devel</span></span></span></div></pre><h3 id="complile-git-2-4-5-tar-xz-from-source">Complile git-2.4.5.tar.xz from source</h3>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>tar&nbsp;xvf&nbsp;git-2.4.5.tar.xz</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;git-2.4.5</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make&nbsp;configure</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>./configure&nbsp;--prefix=/usr</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make&nbsp;-j&nbsp;8&nbsp;all&nbsp;&nbsp;&nbsp;#&nbsp;fast&nbsp;as&nbsp;shit..</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;make&nbsp;install</span></span></span></div></pre><h3 id="compile-nodejs-for-gitlab-environment-which-will-be-used-later">Compile nodejs for gitlab environment which will be used later</h3>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span>tar&nbsp;xvf&nbsp;node-v0.12.7.tar.gz</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>cd</span></span><span>&nbsp;&nbsp;node-v0.12.7</span></span></div><div class="line"><span class="source shell"><span>./configure</span></span></div><div class="line"><span class="source shell"><span>make&nbsp;-j&nbsp;4</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;make&nbsp;install</span></span></div></pre>
<h3 id="python-related">Python related</h3>
<blockquote>
<p>It&#39;s recommaned to update python from 2.6 to 2.7 for some custom settings
BTW, I didn&#39;t install python for the sake of being an idiot in python <img class="emoji" title=":grin:" alt="grin" src="C:\Users\15061260\AppData\Local\atom\app-1.0.19\resources\app.asar\node_modules\roaster\node_modules\emoji-images\pngs/grin.png" height="20"></p>
</blockquote>
<h4 id="install-these-modules-for-python">Install these modules for python</h4>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span>yum&nbsp;install&nbsp;sqlite-devel&nbsp;openssl-devel&nbsp;readline-devel&nbsp;gdbm-devel&nbsp;bzip2-devel&nbsp;ncurses-devel</span></span></div></pre>
<h3 id="compile-cmake-to-install-mariadb-later">Compile cmake to install mariadb later</h3>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span class="support function builtin shell"><span>cd</span></span><span>&nbsp;cmake-3.2.3</span></span></div><div class="line"><span class="source shell"><span>./bootstrap&nbsp;</span><span class="keyword operator list shell"><span>&amp;&amp;</span></span><span>&nbsp;make&nbsp;-j&nbsp;4</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;make&nbsp;install</span></span></div></pre>
<p><em>It&#39;s recommaned that we&#39;are gonna need EPEL and PUIAS Computational repositories to properly install environment for GitLab<br>so I put their online repositorie http addresses here, go manually fetch any packages if there is requirement.  <img class="emoji" title=":pray:" alt="pray" src="C:\Users\15061260\AppData\Local\atom\app-1.0.19\resources\app.asar\node_modules\roaster\node_modules\emoji-images\pngs/pray.png" height="20"> mind fuck!</em></p>
<ul>
<li>Aliyun: <a href="http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/">http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/</a></li>
<li>EPEL: <a href="http://dl.fedoraproject.org/pub/epel/6/x86_64/">http://dl.fedoraproject.org/pub/epel/6/x86_64/</a></li>
<li>PUIAS: <a href="http://springdale.math.ias.edu/data/puias/computational/6.6/x86_64/">http://springdale.math.ias.edu/data/puias/computational/6.6/x86_64/</a></li>
</ul>
<blockquote>
<p>Dependencies which are necessary for GitLab, you may not be able to install all of them  from your local repository.</p>
</blockquote>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span>&nbsp;&nbsp;yum&nbsp;-y&nbsp;install&nbsp;&nbsp;readline&nbsp;readline-devel&nbsp;ncurses-devel&nbsp;gdbm-devel&nbsp;glibc-devel&nbsp;tcl-devel&nbsp;openssl-devel&nbsp;curl-devel&nbsp;expat-devel&nbsp;db4-devel&nbsp;byacc&nbsp;sqlite-devel&nbsp;gcc-c++&nbsp;libyaml&nbsp;libyaml-devel&nbsp;libffi&nbsp;libffi-devel&nbsp;libxml2&nbsp;libxml2-devel&nbsp;libxslt&nbsp;libxslt-devel&nbsp;libicu&nbsp;libicu-devel&nbsp;system-config-firewall-tui&nbsp;python-devel&nbsp;redis&nbsp;sudo&nbsp;wget&nbsp;crontabs&nbsp;logwatch&nbsp;logrotate&nbsp;perl-Time-HiRes&nbsp;git&nbsp;vim-enhanced</span></span></div></pre>
<blockquote>
<p>Exclude these which have existed in system by default, get a list of what we&#39;re missing.</p>
</blockquote>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span>[root@lifestealer&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;</span><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>i</span></span><span>&nbsp;</span><span class="keyword control shell"><span>in</span></span><span>&nbsp;</span><span class="string interpolated backtick shell"><span class="punctuation definition string begin shell"><span>`</span></span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>vim-enhanced&nbsp;readline&nbsp;readline-devel&nbsp;ncurses-devel&nbsp;gdbm-devel&nbsp;glibc-devel&nbsp;tcl-devel&nbsp;openssl-devel&nbsp;curl-devel&nbsp;expat-devel&nbsp;db4-devel&nbsp;byacc&nbsp;sqlite-devel&nbsp;gcc-c++&nbsp;libyaml&nbsp;libyaml-devel&nbsp;libffi&nbsp;libffi-devel&nbsp;libxml2&nbsp;libxml2-devel&nbsp;libxslt&nbsp;libxslt-devel&nbsp;libicu&nbsp;libicu-devel&nbsp;system-config-firewall-tui&nbsp;python-devel&nbsp;redis&nbsp;sudo&nbsp;wget&nbsp;crontabs&nbsp;logwatch&nbsp;logrotate&nbsp;perl-Time-HiRes&nbsp;git</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span class="punctuation definition string end shell"><span>`</span></span></span><span>&nbsp;</span><span class="keyword operator list shell"><span>;</span></span><span class="keyword control shell"><span>do</span></span><span>&nbsp;&nbsp;rpm&nbsp;-q&nbsp;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>i</span></span><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>1&gt;</span></span><span>/dev/null&nbsp;</span><span class="keyword operator pipe shell"><span>|</span><span>|</span></span><span>&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>i</span></span><span>&nbsp;&nbsp;</span><span class="keyword operator list shell"><span>;</span></span><span class="keyword control shell"><span>done</span></span></span><span>&nbsp;</span><span class="keyword operator pipe shell"><span>|</span></span><span>xargs</span></span></div></pre>
<blockquote>
<p>Some of above packages can obviously be installed from local repository (The DVD Distro, learn how to yum install from iso  CentOS-6.6-x86_64-bin-DVD1.iso)
e.g.</p>
</blockquote>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span>yum&nbsp;install&nbsp;openssl-devel&nbsp;readline-devel&nbsp;tcl-devel&nbsp;curl-devel&nbsp;expat-devel&nbsp;sqlite-devel&nbsp;libyaml&nbsp;libyaml-devel&nbsp;python-devel&nbsp;logwatch&nbsp;perl-Time-HiRes&nbsp;newt-python</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;not&nbsp;necessary&nbsp;need&nbsp;system-config-firewall-tui</span><span>&nbsp;</span></span></span></div></pre>
<blockquote>
<p>while others may need to download from officical mirrors, we will put redis aside cause we&#39;re going to compile it seperately.</p>
</blockquote>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span>wget&nbsp;-nc&nbsp;-c&nbsp;--progress&nbsp;http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/libffi-3.0.5-3.2.el6.x86_64.rpm</span></span></div><div class="line"><span class="source shell"><span>wget&nbsp;-nc&nbsp;-c&nbsp;--progress&nbsp;http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/libffi-devel-3.0.5-3.2.el6.x86_64.rpm</span></span></div><div class="line"><span class="source shell"><span>wget&nbsp;-nc&nbsp;-c&nbsp;--progress&nbsp;http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/libxml2-2.7.6-14.el6_5.2.x86_64.rpm</span></span></div><div class="line"><span class="source shell"><span>wget&nbsp;-nc&nbsp;-c&nbsp;--progress&nbsp;http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/libxml2-devel-2.7.6-14.el6_5.2.x86_64.rpm</span></span></div><div class="line"><span class="source shell"><span>wget&nbsp;-nc&nbsp;-c&nbsp;--progress&nbsp;http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/libxslt-1.1.26-2.el6_3.1.x86_64.rpm</span></span></div><div class="line"><span class="source shell"><span>wget&nbsp;-nc&nbsp;-c&nbsp;--progress&nbsp;http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/libxslt-devel-1.1.26-2.el6_3.1.x86_64.rpm</span></span></div><div class="line"><span class="source shell"><span>wget&nbsp;-nc&nbsp;-c&nbsp;--progress&nbsp;http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/libicu-4.2.1-9.1.el6_2.x86_64.rpm</span></span></div><div class="line"><span class="source shell"><span>wget&nbsp;-nc&nbsp;-c&nbsp;--progress&nbsp;http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/libicu-devel-4.2.1-9.1.el6_2.x86_64.rpm</span></span></div><div class="line"><span class="source shell"><span>wget&nbsp;-nc&nbsp;-c&nbsp;--progress&nbsp;http://mirrors.aliyun.com/centos/6.6/os/x86_64/Packages/system-config-firewall-tui-1.2.27-7.1.el6.noarch.rpm</span></span></div></pre>
<h3 id="compile-redis">Compile redis</h3>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>tar&nbsp;xvf&nbsp;redis-3.0.3.tar.gz</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;redis-3.0.3</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make&nbsp;MALLOC=jemalloc</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make&nbsp;test</span></span></span></div></pre><h3 id="configure-sendmail">Configure sendmail</h3>
<p>yum install sendmail-cf</p>
<h3 id="compile-and-install-mariad">Compile and Install Mariad</h3>
<h4 id="install-libevent-and-lzo-either-from-iso-image-or-official-repo">Install libevent and lzo either from ISO image or official repo</h4>
<blockquote>
<p> they&#39;re both builtin if you didn&#39;t choose a minimal installation.</p>
</blockquote>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>yum&nbsp;install&nbsp;libtevent-devel&nbsp;libevent&nbsp;lzo&nbsp;lzop</span></span></span></div></pre><h4 id="download-lz4-rpm-pacakges-from-epel-repo">Download lz4 rpm pacakges from EPEL repo</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://dl.fedoraproject.org/pub/epel/6/x86_64/lz4-static-r131-1.el6.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://dl.fedoraproject.org/pub/epel/6/x86_64/lz4-r131-1.el6.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://dl.fedoraproject.org/pub/epel/6/x86_64/lz4-devel-r131-1.el6.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://dl.fedoraproject.org/pub/epel/6/x86_64/msgpack-0.5.7-5.el6.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://dl.fedoraproject.org/pub/epel/6/x86_64/msgpack-devel-0.5.7-5.el6.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link ftp hyperlink"><span>ftp://bo.mirror.garr.it/pub/1/slc/slc65/x86_64/Packages/cracklib-devel-2.8.16-4.el6.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link http hyperlink"><span>http://ftp.rediris.es/volumes/sites/linuxsoft.cern.ch/slc/slc62/x86_64/Packages/cracklib-devel-2.8.16-4.el6.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link ftp hyperlink"><span>ftp://bo.mirror.garr.it/pub/1/slc/slc65/x86_64/Packages/libevent-devel-1.4.13-4.el6.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link ftp hyperlink"><span>ftp://bo.mirror.garr.it/pub/1/centos/6.6/os/x86_64/Packages/libevent-headers-1.4.13-4.el6.noarch.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://bo.mirror.garr.it/pub/1/centos/6.6/os/x86_64/Packages/libevent-doc-1.4.13-4.el6.noarch.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;rpm&nbsp;-ivh&nbsp;lz4-r131-1.el6.x86_64.rpm</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;rpm&nbsp;-ivh&nbsp;lz4-static-r131-1.el6.x86_64.rpm</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;rpm&nbsp;-ivh&nbsp;lz4-devel-r131-1.el6.x86_64.rpm</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;rpm&nbsp;-ivh&nbsp;msgpack-0.5.7-5.el6.x86_64.rpm</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;rpm&nbsp;-ivh&nbsp;msgpack-devel-0.5.7-5.el6.x86_64.rpm</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;rpm&nbsp;-ivh&nbsp;cracklib-devel-2.8.16-4.el6.x86_64.rpm</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cracklib-devel-2.8.16-4.el6.x86_64.rpm</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;rpm&nbsp;-ivh&nbsp;libevent-headers-1.4.13-4.el6.noarch.rpm&nbsp;libevent-devel-1.4.13-4.el6.x86_64.rpm&nbsp;libevent-doc-1.4.13-4.el6.noarch.rpm</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;rpm&nbsp;-ivh&nbsp;lzo-minilzo-2.03-3.1.el6.x86_64.rpm&nbsp;lzo-devel-2.03-3.1.el6.x86_64.rpm</span></span></span></div></pre><h4 id="install-package-kytea-and-libzmq-from-source">Install package kytea and libzmq from source</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://www.phontron.com/kytea/download/kytea-0.4.7.tar.gz</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://download.zeromq.org/zeromq-4.1.2.tar.gz</span></span></span></span></div></pre><h4 id="complile-kytea">Complile kytea</h4>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span>tar&nbsp;-xzf&nbsp;kytea-0.4.7.tar.gz</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>cd</span></span><span>&nbsp;kytea-0.4.7</span></span></div><div class="line"><span class="source shell"><span>./configure</span></span></div><div class="line"><span class="source shell"><span>make&nbsp;-j&nbsp;4</span></span></div><div class="line"><span class="source shell"><span>make&nbsp;check</span></span></div><div class="line"><span class="source shell"><span>make&nbsp;install</span></span></div></pre>
<h4 id="compile-zeromq-download-libsodium-for-dependencies-">Compile zeromq (download libsodium for dependencies)</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://dl.fedoraproject.org/pub/epel/6/x86_64/libsodium-0.4.5-3.el6.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://dl.fedoraproject.org/pub/epel/6/x86_64/libsodium-devel-0.4.5-3.el6.x86_64.rpm</span></span></span></span></div></pre><pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>tar&nbsp;xvf&nbsp;zeromq-4.1.2.tar.gz</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;zeromq-4.1.2</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>./configure&nbsp;&amp;&amp;&nbsp;make&nbsp;-j8&nbsp;&amp;&amp;&nbsp;sudo&nbsp;make&nbsp;install</span></span></span></div></pre><h4 id="compile-openpam-h">compile openpam.h</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>./configure&nbsp;--with-pam-unix&nbsp;--with-su</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;make&nbsp;install</span></span></span></div></pre><h4 id="enable-tcmalloc-for-mariadb">Enable tcmalloc for mariadb</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>##</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://down1.chinaunix.net/distfiles/libunwind-1.0.tar.gz</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://cznic.dl.sourceforge.net/project/openpam/openpam/Ourouparia/openpam-20140912.tar.gz</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://nchc.dl.sourceforge.net/project/cracklib/cracklib/2.9.2/cracklib-2.9.2.tar.gz</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link https hyperlink"><span>https://codeload.github.com/msgpack/msgpack-c/zip/master</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>wget&nbsp;</span><span class="markup underline link http hyperlink"><span>http://snowball.tartarus.org/dist/libstemmer_c.tgz</span></span></span></span></div></pre><h4 id="installation-of-cracklib">Installation of CrackLib</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>tar&nbsp;xvf&nbsp;cracklib-2.9.2.tar.gz</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;cracklib-2.9.2</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sed&nbsp;-i&nbsp;&#39;/skipping/d&#39;&nbsp;util/packer.c&nbsp;&amp;&amp;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>./configure&nbsp;--prefix=/usr&nbsp;&nbsp;&nbsp;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>--disable-static&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--with-default-dict=/lib/cracklib/pw_dict&nbsp;&amp;&amp;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make&nbsp;install&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>mv&nbsp;-v&nbsp;/usr/lib/libcrack.so.*&nbsp;/lib&nbsp;&amp;&amp;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>ln&nbsp;-sfv&nbsp;../../lib/$(readlink&nbsp;/usr/lib/libcrack.so)&nbsp;/usr/lib/libcrack.so</span></span></span></div></pre><h4 id="install-msgpack-c">Install msgpack-c</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>unzip&nbsp;msgpack-c-master.zip</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;msgpack-c-master</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>./bootstrap</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>./configure</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;make&nbsp;install</span></span></span></div></pre><h4 id="install-openpam">Install openpam</h4>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span>tar&nbsp;xvf&nbsp;openpam-20140912.tar.gz</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>cd</span></span><span>&nbsp;openpam-20140912</span></span></div><div class="line"><span class="source shell"><span>./configure&nbsp;--with-pam-unix&nbsp;--with-su</span></span></div><div class="line"><span class="source shell"><span>make&nbsp;-j8</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;make&nbsp;install</span></span></div></pre>
<blockquote>
<p>I was planning to install the lastest version but, but failed to compile
well, gperftools-2.0.tar.gz was pickedup to work with libunwind-0.99</p>
</blockquote>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>git&nbsp;clone&nbsp;</span><span class="markup underline link https hyperlink"><span>https://github.com/mobing/gperftools.git</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;gperftools&nbsp;need&nbsp;&nbsp;Autoconf&nbsp;version&nbsp;2.68&nbsp;or&nbsp;higher&nbsp;is&nbsp;required</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>rpm&nbsp;-e&nbsp;--nodeps&nbsp;autoconf-2.63</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#install&nbsp;autoconf</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>tar&nbsp;xvf&nbsp;autoconf-2.69.tar.xz</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;&nbsp;autoconf-2.69</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>./configure</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make&nbsp;install</span></span></span></div></pre><blockquote>
<p>there is an error when make install libunwind because of the compability of autoconf tools, run autoreconf -i -f</p>
</blockquote>
<h4 id="install-libunwind">Install libunwind</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>tar&nbsp;xvf&nbsp;libunwind-0.99.tar.gz</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;libunwind-0.99</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>CFLAGS=-fPIC&nbsp;./configure</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make&nbsp;CFLAGS=-fPIC</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;make&nbsp;CFLAGS=-fPIC&nbsp;install</span></span></span></div></pre><h4 id="complie-gperftools">Complie gperftools</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>tar&nbsp;xvf&nbsp;gperftools-2.0.tar.gz</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;gperftools-2.0</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>./configure</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make&nbsp;-j&nbsp;2</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;make&nbsp;install</span></span></span></div></pre><pre class="editor-colors lang-TODO"><div class="line"><span class="text plain null-grammar"><span>cat&nbsp;&gt;&gt;&nbsp;/etc/ld.so.conf.d/maradb-10.1.5.conf&lt;&lt;EOF</span></span></div><div class="line"><span class="text plain null-grammar"><span>/usr/local/lib/</span></span></div><div class="line"><span class="text plain null-grammar"><span>EOF</span></span></div></pre>
<h4 id="install-libstemmer-c">Install libstemmer-c</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>unzip&nbsp;libstemmer_c-master.zip</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;libstemmer_c-master</span></span></span></div></pre><h4 id="install-boost-support-for-mariadb-10-1">Install boost support for mariadb-10.1</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>yum&nbsp;-y&nbsp;install&nbsp;boost&nbsp;boost-devel&nbsp;bison&nbsp;libtool</span></span></span></div></pre><h4 id="create-soft-link-for-libkytea-and-msgpack">Create Soft link for libkytea.* and msgpack</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;ln&nbsp;-s&nbsp;/usr/local/lib/libkytea.*&nbsp;/usr/lib64</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;ln&nbsp;-s&nbsp;/usr/local/lib/libmsgpack*&nbsp;/usr/lib64</span></span></span></div></pre><h4 id="install-mariadb">Install MariaDB</h4>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;Define&nbsp;the&nbsp;mysql&nbsp;source&nbsp;tarball&nbsp;name&nbsp;here</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="storage modifier shell"><span>export</span></span><span>&nbsp;MYSQL_TAR_GZ=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>groupadd&nbsp;mysql</span></span></div><div class="line"><span class="source shell"><span>useradd&nbsp;-g&nbsp;mysql&nbsp;mysql</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>tar&nbsp;xvf&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_TAR_GZ</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>cd</span></span><span>&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_TAR_GZ</span><span class="keyword operator expansion shell"><span>%</span></span><span>.tar</span><span class="keyword operator expansion shell"><span>*</span></span><span>gz</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>MYSQL_SOCK_LOCATION=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>/var/run/mysql/run/mysql.socket</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>MYSQL_INSTALL_DIR=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>/opt/mysql</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>MYSQLDATADIR=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>/data/mysql</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;these&nbsp;options&nbsp;are&nbsp;based&nbsp;on&nbsp;personal&nbsp;preferences</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>##&nbsp;removed&nbsp;this&nbsp;options&nbsp;in&nbsp;Red&nbsp;Hat&nbsp;Enterprise&nbsp;Linux&nbsp;Server</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;-DCMAKE_EXE_LINKER_FLAGS=&#39;-ltcmalloc&#39;&nbsp;\</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;release&nbsp;6.3&nbsp;(Santiago)&nbsp;because&nbsp;of&nbsp;the&nbsp;unconqurable&nbsp;compiler&nbsp;error</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>cmake&nbsp;</span><span class="support function builtin shell"><span>.</span></span><span>&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DCMAKE_INSTALL_PREFIX=</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_INSTALL_DIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DMYSQL_DATADIR=</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQLDATADIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DDEFAULT_CHARSET=utf8&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DDEFAULT_COLLATION=utf8_general_ci&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DCMAKE_EXE_LINKER_FLAGS=</span><span class="string quoted single shell"><span class="punctuation definition string begin shell"><span>&#39;</span></span><span>-ltcmalloc</span><span class="punctuation definition string end shell"><span>&#39;</span></span></span><span>&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DWITH_SSL=system&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DWITH_INNOBASE_STORAGE_ENGINE=1&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DMYSQL_TCP_PORT=3306&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DMYSQL_UNIX_ADDR=</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_SOCK_LOCATION</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DWITH_READLINE=ON&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DMYSQL_USER=mysql&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DWITH_EXTRA_CHARSETS=all&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DWITH_PARTITION_STORAGE_ENGINE=ON&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DWITH_SPHINX_STORAGE_ENGINE=ON&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>-DWITH_BLACKHOLE_STORAGE_ENGINE=ON</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>make&nbsp;-j8</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;make&nbsp;install</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;create&nbsp;mysql&nbsp;data&nbsp;directory</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&nbsp;[&nbsp;</span><span class="keyword operator pipe shell"><span>!</span></span><span>&nbsp;-d&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQLDATADIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;]</span><span class="keyword operator list shell"><span>;</span></span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;sudo&nbsp;&nbsp;mkdir&nbsp;-p&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQLDATADIR</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;assgin&nbsp;the&nbsp;correct&nbsp;permission</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;chmod&nbsp;+w&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_INSTALL_DIR</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;chown&nbsp;-R&nbsp;mysql:mysql&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQLDATADIR</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;chmod&nbsp;go-rwx&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQLDATADIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;-R</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;prepare&nbsp;the&nbsp;bootstrap&nbsp;config&nbsp;file</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;cp&nbsp;support-files/my-large.cnf&nbsp;/etc/my.cnf</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;cp&nbsp;support-files/mysql.server&nbsp;/etc/init.d/mysqld</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;modify&nbsp;initd&nbsp;script&nbsp;to&nbsp;make&nbsp;it&nbsp;start&nbsp;properly</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;sed&nbsp;-i&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>s#^basedir=.*#&amp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_INSTALL_DIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>#</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;/etc/init.d/mysqld</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;sed&nbsp;-i&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>s#^datadir=.*#&amp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQLDATADIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>#</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;/etc/init.d/mysqld</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;chmod&nbsp;755&nbsp;/etc/init.d/mysqld</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;add&nbsp;auto&nbsp;start</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;chkconfig&nbsp;--add&nbsp;mysqld</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;chkconfig&nbsp;--level&nbsp;345&nbsp;&nbsp;mysqld&nbsp;on</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;link&nbsp;the&nbsp;library&nbsp;and&nbsp;headers&nbsp;to&nbsp;system&nbsp;path</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;ln&nbsp;-s&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_INSTALL_DIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>/lib/&nbsp;/usr/lib/mysql</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;ln&nbsp;-s&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_INSTALL_DIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>/include/mysql/&nbsp;/usr/include/mysql</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;link&nbsp;the&nbsp;exec&nbsp;file</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;ln&nbsp;-s&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_INSTALL_DIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>/bin/mysql&nbsp;/usr/bin/mysql</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;ln&nbsp;-s&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_INSTALL_DIR</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;add&nbsp;the&nbsp;ld&nbsp;config&nbsp;path</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;cat&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;/etc/ld.so.conf.d/maradb-10.1.5.conf</span><span class="string unquoted heredoc shell"><span class="keyword operator heredoc shell"><span>&lt;&lt;</span></span><span class="keyword control heredoc-token shell"><span>EOF</span></span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>${MYSQL_INSTALL_DIR}/lib/mysql</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>${MYSQL_INSTALL_DIR}/lib</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span class="keyword control heredoc-token shell"><span>EOF</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;make&nbsp;mysql&nbsp;lib&nbsp;affect</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;ldconfig</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;Install&nbsp;builtin&nbsp;tables</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_INSTALL_DIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>/scripts/mysql_install_db&nbsp;--basedir=</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_INSTALL_DIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>--datadir=</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQLDATADIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;\</span></span></div><div class="line"><span class="source shell"><span>--user=mysql</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;restart&nbsp;the&nbsp;services</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>service&nbsp;mysqld&nbsp;start</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;change&nbsp;default&nbsp;access&nbsp;rules</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>MYSQL_INSTALL_DIR</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>/bin/mysql_secure_installation</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;this&nbsp;is&nbsp;an&nbsp;approach&nbsp;for&nbsp;the&nbsp;rails&nbsp;mysql&nbsp;driver&nbsp;which&nbsp;search&nbsp;mysql&nbsp;headers&nbsp;on</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;several&nbsp;specific&nbsp;places,&nbsp;here&nbsp;we&nbsp;pick&nbsp;up&nbsp;on&nbsp;/usr/local/mysql,&nbsp;it&#39;s&nbsp;not&nbsp;necessary</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;if&nbsp;you&nbsp;install&nbsp;mariadb&nbsp;under&nbsp;/usr&nbsp;/usr/local&nbsp;/opt/local&nbsp;/var/,&nbsp;etc.</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;ln&nbsp;-s&nbsp;/opt/mysql/&nbsp;/usr/local/mysql</span></span></div></pre>
<h4 id="create-instance-for-gitlab">Create instance for gitlab</h4>
<pre class="editor-colors lang-MySQL"><div class="line"><span class="text plain null-grammar"><span>#&nbsp;Login&nbsp;to&nbsp;MySQL</span></span></div><div class="line"><span class="text plain null-grammar"><span>mysql&nbsp;-u&nbsp;root&nbsp;-p</span></span></div><div class="line"><span class="text plain null-grammar"><span>#&nbsp;Type&nbsp;the&nbsp;database&nbsp;root&nbsp;password</span></span></div><div class="line"><span class="text plain null-grammar"><span>#&nbsp;Create&nbsp;a&nbsp;user&nbsp;for&nbsp;GitLab.&nbsp;(change&nbsp;supersecret&nbsp;to&nbsp;a&nbsp;real&nbsp;password)</span></span></div><div class="line"><span class="text plain null-grammar"><span>CREATE&nbsp;USER&nbsp;&#39;gitlab&#39;@&#39;localhost&#39;&nbsp;IDENTIFIED&nbsp;BY&nbsp;&#39;supersecret&#39;;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>#&nbsp;Create&nbsp;the&nbsp;GitLab&nbsp;production&nbsp;database</span></span></div><div class="line"><span class="text plain null-grammar"><span>CREATE&nbsp;DATABASE&nbsp;IF&nbsp;NOT&nbsp;EXISTS&nbsp;`gitlabhq_production`&nbsp;DEFAULT&nbsp;CHARACTER&nbsp;SET&nbsp;`utf8`&nbsp;COLLATE&nbsp;`utf8_unicode_ci`;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>#&nbsp;Grant&nbsp;the&nbsp;GitLab&nbsp;user&nbsp;necessary&nbsp;permissopns&nbsp;on&nbsp;the&nbsp;table.</span></span></div><div class="line"><span class="text plain null-grammar"><span>GRANT&nbsp;SELECT,&nbsp;LOCK&nbsp;TABLES,&nbsp;INSERT,&nbsp;UPDATE,&nbsp;DELETE,&nbsp;CREATE,&nbsp;DROP,&nbsp;INDEX,&nbsp;ALTER&nbsp;ON&nbsp;`gitlabhq_production`.*&nbsp;TO&nbsp;&#39;gitlab&#39;@&#39;localhost&#39;;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>#update</span></span></div><div class="line"><span class="text plain null-grammar"><span>flush&nbsp;privileges;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>#&nbsp;Quit&nbsp;the&nbsp;database&nbsp;session</span></span></div><div class="line"><span class="text plain null-grammar"><span>\q</span></span></div></pre>
<h4 id="install-redis">Install redis</h4>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span>[root@itsasitapp203&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;groupadd&nbsp;redis</span></span></div><div class="line"><span class="source shell"><span>[root@itsasitapp203&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;useradd&nbsp;-m&nbsp;-g&nbsp;redis&nbsp;redis</span></span></div><div class="line"><span class="source shell"><span>[root@itsasitapp203&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;groupadd&nbsp;git</span></span></div><div class="line"><span class="source shell"><span>[root@itsasitapp203&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;useradd&nbsp;-m&nbsp;-g&nbsp;git&nbsp;git</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;rails&nbsp;will&nbsp;aceess&nbsp;redis&nbsp;as&nbsp;user&nbsp;git</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>[root@itsasitapp203&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;usermod&nbsp;-Ggit,redis&nbsp;-a&nbsp;git</span></span></div><div class="line"><span class="source shell"><span>[root@itsasitapp203&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;groupadd&nbsp;mysql</span></span></div><div class="line"><span class="source shell"><span>[root@itsasitapp203&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;useradd&nbsp;-m&nbsp;-g&nbsp;mysql&nbsp;mysql</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;rails&nbsp;will&nbsp;aceess&nbsp;mysql&nbsp;as&nbsp;user&nbsp;git</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>[root@itsasitapp203&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;usermod&nbsp;-Gmysql,git&nbsp;git</span></span></div><div class="line"><span class="source shell"><span>[root@itsasitapp203&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;groupadd&nbsp;nginx</span></span></div><div class="line"><span class="source shell"><span>[root@itsasitapp203&nbsp;</span><span class="keyword operator tilde shell"><span>~</span></span><span>]#&nbsp;useradd&nbsp;-s&nbsp;/sbin/nologin&nbsp;-g&nbsp;nginx&nbsp;nginx</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;Create&nbsp;the&nbsp;directory&nbsp;which&nbsp;contains&nbsp;the&nbsp;socket</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>mkdir&nbsp;/var/run/redis</span></span></div><div class="line"><span class="source shell"><span>chown&nbsp;redis:redis&nbsp;/var/run/redis</span></span></div><div class="line"><span class="source shell"><span>chmod&nbsp;755&nbsp;/var/run/redis</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;compile&nbsp;redis&nbsp;with&nbsp;jemalloc</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>tar&nbsp;xvf&nbsp;redis-3.0.3.tar.gz</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>cd</span></span><span>&nbsp;redis-3.0.3</span></span></div><div class="line"><span class="source shell"><span>make&nbsp;MALLOC=jemalloc</span></span></div><div class="line"><span class="source shell"><span>make&nbsp;</span><span class="support function builtin shell"><span>test</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;well,&nbsp;make&nbsp;sure&nbsp;your&nbsp;redis&nbsp;works&nbsp;fine</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;Here&nbsp;are&nbsp;the&nbsp;output&nbsp;of&nbsp;test</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;Execution&nbsp;time&nbsp;of&nbsp;different&nbsp;units:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;1&nbsp;seconds&nbsp;-&nbsp;unit/printver</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;0&nbsp;seconds&nbsp;-&nbsp;unit/quit</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;1&nbsp;seconds&nbsp;-&nbsp;unit/scan</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;1&nbsp;seconds&nbsp;-&nbsp;unit/auth</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;2&nbsp;seconds&nbsp;-&nbsp;unit/multi</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;3&nbsp;seconds&nbsp;-&nbsp;unit/protocol</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;11&nbsp;seconds&nbsp;-&nbsp;unit/expire</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;14&nbsp;seconds&nbsp;-&nbsp;unit/type/hash</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;15&nbsp;seconds&nbsp;-&nbsp;unit/other</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;15&nbsp;seconds&nbsp;-&nbsp;unit/type/list-2</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;16&nbsp;seconds&nbsp;-&nbsp;unit/type/list</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;2&nbsp;seconds&nbsp;-&nbsp;integration/rdb</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;2&nbsp;seconds&nbsp;-&nbsp;integration/convert-zipmap-hash-on-load</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;1&nbsp;seconds&nbsp;-&nbsp;integration/logging</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;0&nbsp;seconds&nbsp;-&nbsp;unit/pubsub</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;1&nbsp;seconds&nbsp;-&nbsp;unit/slowlog</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;4&nbsp;seconds&nbsp;-&nbsp;integration/aof</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;0&nbsp;seconds&nbsp;-&nbsp;unit/introspection</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;2&nbsp;seconds&nbsp;-&nbsp;unit/limits</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;6&nbsp;seconds&nbsp;-&nbsp;unit/scripting</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;24&nbsp;seconds&nbsp;-&nbsp;unit/dump</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;24&nbsp;seconds&nbsp;-&nbsp;unit/type/set</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;29&nbsp;seconds&nbsp;-&nbsp;unit/type/zset</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;11&nbsp;seconds&nbsp;-&nbsp;unit/bitops</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;31&nbsp;seconds&nbsp;-&nbsp;integration/replication-2</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;16&nbsp;seconds&nbsp;-&nbsp;unit/maxmemory</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;33&nbsp;seconds&nbsp;-&nbsp;unit/sort</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;37&nbsp;seconds&nbsp;-&nbsp;unit/basic</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;37&nbsp;seconds&nbsp;-&nbsp;unit/aofrw</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;38&nbsp;seconds&nbsp;-&nbsp;integration/replication</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;18&nbsp;seconds&nbsp;-&nbsp;unit/memefficiency</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;41&nbsp;seconds&nbsp;-&nbsp;unit/type/list-3</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;21&nbsp;seconds&nbsp;-&nbsp;unit/hyperloglog</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;49&nbsp;seconds&nbsp;-&nbsp;integration/replication-3</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;48&nbsp;seconds&nbsp;-&nbsp;integration/replication-4</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;42&nbsp;seconds&nbsp;-&nbsp;integration/replication-psync</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;35&nbsp;seconds&nbsp;-&nbsp;unit/obuf-limits</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="constant character escape shell"><span>\o</span></span><span>/&nbsp;All&nbsp;tests&nbsp;passed&nbsp;without&nbsp;errors</span><span class="keyword operator pipe shell"><span>!</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;create&nbsp;redis&nbsp;home&nbsp;direcotry</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;mkdir&nbsp;/opt/redis</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;mv&nbsp;&nbsp;redis-3.0.3/&nbsp;/opt/redis/redis-3.0.3/</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;chown&nbsp;redis:redis&nbsp;/opt/redis&nbsp;-R</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;ass&nbsp;wipe&nbsp;some&nbsp;simple&nbsp;configurations</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;mkdir&nbsp;/etc/redis</span></span></div><div class="line"><span class="source shell"><span>sudo&nbsp;egrep&nbsp;-Ev&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>^$|^#</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;/opt/redis/redis-3.0.3/redis.conf&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;/etc/redis/redis.conf</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;change&nbsp;daemonize&nbsp;to&nbsp;yes</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sed&nbsp;-i&nbsp;</span><span class="string quoted single shell"><span class="punctuation definition string begin shell"><span>&#39;</span></span><span>s/^daemonize&nbsp;.*/daemonize&nbsp;yes/g</span><span class="punctuation definition string end shell"><span>&#39;</span></span></span><span>&nbsp;/etc/redis/redis.conf</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;Disable&nbsp;Redis&nbsp;listening&nbsp;on&nbsp;TCP&nbsp;by&nbsp;setting&nbsp;&#39;port&#39;&nbsp;to&nbsp;0</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sed&nbsp;-i&nbsp;</span><span class="string quoted single shell"><span class="punctuation definition string begin shell"><span>&#39;</span></span><span>s/^port&nbsp;.*/port&nbsp;0/</span><span class="punctuation definition string end shell"><span>&#39;</span></span></span><span>&nbsp;/etc/redis/redis.conf</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;Enable&nbsp;Redis&nbsp;socket&nbsp;for&nbsp;default&nbsp;Debian&nbsp;/&nbsp;Ubuntu&nbsp;path</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted single shell"><span class="punctuation definition string begin shell"><span>&#39;</span></span><span>unixsocket&nbsp;/var/run/redis/redis.sock</span><span class="punctuation definition string end shell"><span>&#39;</span></span></span><span>&nbsp;&nbsp;</span><span class="keyword operator pipe shell"><span>|</span></span><span>tee&nbsp;-a&nbsp;/etc/redis/redis.conf</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;change&nbsp;pid&nbsp;path&nbsp;to&nbsp;the&nbsp;same&nbsp;directory&nbsp;as&nbsp;socket,&nbsp;why&nbsp;am&nbsp;I&nbsp;doing&nbsp;such&nbsp;a&nbsp;silly&nbsp;thing?&nbsp;:(</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>sed&nbsp;-i&nbsp;</span><span class="string quoted single shell"><span class="punctuation definition string begin shell"><span>&#39;</span></span><span>s#^pidfile&nbsp;.*#pidfile&nbsp;/var/run/redis/redis.pid#</span><span class="punctuation definition string end shell"><span>&#39;</span></span></span><span>&nbsp;/etc/redis/redis.conf</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;Grant&nbsp;permission&nbsp;to&nbsp;the&nbsp;socket&nbsp;to&nbsp;all&nbsp;members&nbsp;of&nbsp;the&nbsp;redis&nbsp;group,&nbsp;here</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>be&nbsp;aware&nbsp;that&nbsp;the&nbsp;gitlab&nbsp;must&nbsp;be&nbsp;part&nbsp;of&nbsp;the&nbsp;group&nbsp;later</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted single shell"><span class="punctuation definition string begin shell"><span>&#39;</span></span><span>unixsocketperm&nbsp;770</span><span class="punctuation definition string end shell"><span>&#39;</span></span></span><span class="keyword operator pipe shell"><span>|</span></span><span>tee&nbsp;-a&nbsp;/etc/redis/redis.conf</span></span></div></pre>
<h4 id="here-are-some-optional-tips-which-will-make-your-redis-more-friendly">Here are some optional tips which will make your redis more friendly</h4>
<pre class="editor-colors lang-shell"><div class="line"><span class="source shell"><span>su&nbsp;-&nbsp;redis</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;some&nbsp;tips&nbsp;make&nbsp;the&nbsp;environent&nbsp;looks&nbsp;more&nbsp;friendly</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>cat&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;&gt;</span></span><span>&nbsp;.bash_profile</span><span class="string unquoted heredoc shell"><span class="keyword operator heredoc shell"><span>&lt;&lt;</span></span><span class="keyword control heredoc-token shell"><span>EOF</span></span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>#&nbsp;.bashrc</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>#&nbsp;Source&nbsp;global&nbsp;definitions</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>if&nbsp;[&nbsp;-f&nbsp;/etc/bashrc&nbsp;];&nbsp;then</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;/etc/bashrc</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>fi</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>#&nbsp;User&nbsp;specific&nbsp;aliases&nbsp;and&nbsp;functions</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>REDIS_HOME=&quot;/opt/redis/redis-3.0.3&quot;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>REDIS_CLI=&quot;${REDIS_HOME}/src/redis-cli&quot;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>REDISSOCKET=&quot;/var/run/redis/redis.sock&quot;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>#&nbsp;a&nbsp;quick&nbsp;approach&nbsp;alias&nbsp;for&nbsp;redis-cli</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>alias&nbsp;redis=&quot;${REDIS_CLI}&nbsp;-s&nbsp;${REDISSOCKET}&quot;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>cd&nbsp;/opt/redis</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>echo&nbsp;&quot;Current&nbsp;Direcotry:&nbsp;$(pwd)&quot;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>PS1=&quot;[\u@\h&nbsp;\W]\$&nbsp;&quot;</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span>export&nbsp;PS1</span></span></span></div><div class="line"><span class="source shell"><span class="string unquoted heredoc shell"><span class="keyword control heredoc-token shell"><span>EOF</span></span></span></span></div></pre>
<h4 id="yet-another-etc-init-d-redis">Yet another /etc/init.d/redis</h4>
<blockquote>
<p>rewrite it since the offical generate script turn out to be a piece of shit</p>
</blockquote>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;put&nbsp;script&nbsp;redis.sh&nbsp;under&nbsp;/etc/init.d&nbsp;so&nbsp;it&nbsp;will&nbsp;bootstrap&nbsp;with&nbsp;init</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cat&nbsp;&gt;&nbsp;/etc/init.d/redis&lt;&lt;EOF</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#!/bin/sh</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#set&nbsp;-xv</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;written&nbsp;by&nbsp;Feng&nbsp;LYU</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Email:&nbsp;aragon1130@gmail.com</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Source&nbsp;function&nbsp;library.</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>.&nbsp;/etc/rc.d/init.d/functions</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>REDIS_HOME=&quot;/opt/redis/redis-3.0.3&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>REDIS_SERVER=&quot;${REDIS_HOME}/src/redis-server&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>REDIS_CLI=&quot;${REDIS_HOME}/src/redis-cli&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>CONF=&quot;/etc/redis/redis.conf&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>REDISSOCKET=&quot;/var/run/redis/redis.sock&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>REDIS_USER=&quot;redis&quot;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>SUDO_REDIS=&quot;sudo&nbsp;su&nbsp;-&nbsp;${REDIS_USER}&nbsp;-c&quot;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;fix&nbsp;me&nbsp;if&nbsp;you&nbsp;have&nbsp;a&nbsp;more&nbsp;pretty&nbsp;way</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#PID=$(/usr/bin/pgrep&nbsp;-u&nbsp;redis&nbsp;redis-server&nbsp;2&gt;/dev/null)</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>PID=$(/usr/bin/pgrep&nbsp;-u&nbsp;${REDIS_USER}&nbsp;redis-server)</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>case&nbsp;&quot;$1&quot;&nbsp;in</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>start)</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>if&nbsp;[&nbsp;&quot;x&quot;&nbsp;!=&nbsp;&quot;x${PID}&quot;&nbsp;]</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>action&nbsp;&quot;Redis&nbsp;process&nbsp;is&nbsp;already&nbsp;running&quot;&nbsp;/bin/false</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>else</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>${SUDO_REDIS}&nbsp;&quot;${REDIS_SERVER}&nbsp;${CONF}&quot;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>if&nbsp;test&nbsp;$(/usr/bin/pgrep&nbsp;-u&nbsp;${REDIS_USER}&nbsp;redis-server)&nbsp;;then</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>action&nbsp;&quot;Redis&nbsp;process&nbsp;started&quot;&nbsp;/bin/true</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>fi</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>fi</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>stop)</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>if&nbsp;[&nbsp;&quot;x&quot;&nbsp;=&nbsp;&quot;x${PID}&quot;&nbsp;]</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>action&nbsp;&quot;Redis&nbsp;process&nbsp;is&nbsp;not&nbsp;running&quot;&nbsp;/bin/false</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>else</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>${SUDO_REDIS}&nbsp;&quot;${REDIS_CLI}&nbsp;-s&nbsp;${REDISSOCKET}&nbsp;shutdown&quot;&nbsp;&amp;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;[&nbsp;-x&nbsp;/proc/${PID}&nbsp;]</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>echo&nbsp;&quot;[$(date&nbsp;+%H:%M:%S)]&nbsp;Waiting&nbsp;for&nbsp;Redis&nbsp;to&nbsp;shutdown&nbsp;...&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;1</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>done</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action&nbsp;&quot;Redis&nbsp;stopped&quot;&nbsp;/bin/true</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>fi</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>status)</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>if&nbsp;[&nbsp;&quot;x&quot;&nbsp;=&nbsp;&quot;x${PID}&quot;&nbsp;]</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>action&nbsp;&#39;Redis&nbsp;process&nbsp;is&nbsp;not&nbsp;running&#39;&nbsp;/bin/false</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>else</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>action&nbsp;&quot;Redis&nbsp;is&nbsp;running&nbsp;${PID}&quot;&nbsp;/bin/true</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>fi</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>info)</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>if&nbsp;[&nbsp;&quot;x&quot;&nbsp;=&nbsp;&quot;x${PID}&quot;&nbsp;]</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>action&nbsp;&quot;Redis&nbsp;process&nbsp;is&nbsp;not&nbsp;running&quot;&nbsp;/bin/false</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>else</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>${SUDO_REDIS}&nbsp;&quot;${REDIS_CLI}&nbsp;-s&nbsp;${REDISSOCKET}&nbsp;info&quot;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>fi</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>restart)</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>$0&nbsp;stop</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$0&nbsp;start</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;</span></span></span></div><div class="line"><span class="text plain"><span class="meta bullet-point star text"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition item text"><span>*</span></span><span>)</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>echo&nbsp;&quot;Please&nbsp;use&nbsp;start,&nbsp;stop,&nbsp;restart&nbsp;or&nbsp;status&nbsp;as&nbsp;first&nbsp;argument&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>esac</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>EOF</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#start&nbsp;redis</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>service&nbsp;redis&nbsp;start</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;connect&nbsp;to&nbsp;redis</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>[root@itsasitapp201&nbsp;init.d]#&nbsp;su&nbsp;-&nbsp;redis</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Current&nbsp;Direcotry:&nbsp;/opt/redis</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>[redis@itsasitapp201&nbsp;redis]$&nbsp;redis</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>redis&nbsp;/var/run/redis/redis.sock&gt;&nbsp;info</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Server</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>redis_version:3.0.3</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>redis_git_sha1:00000000</span></span></span></div></pre><h4 id="create-system-user-git">Create System user git</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>groupadd&nbsp;git</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>useadd&nbsp;-m&nbsp;-g&nbsp;git&nbsp;git</span></span></span></div></pre><h4 id="config-sendmail">Config Sendmail</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#Forwarding&nbsp;all&nbsp;emails</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;although&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;what&nbsp;below&nbsp;thing&nbsp;is&nbsp;doing.</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Now&nbsp;we&nbsp;want&nbsp;all&nbsp;logging&nbsp;of&nbsp;the&nbsp;system&nbsp;to&nbsp;be&nbsp;forwarded&nbsp;to&nbsp;a&nbsp;central&nbsp;email&nbsp;address:</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>su&nbsp;-</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>echo&nbsp;adminlogs@example.com&nbsp;&gt;&nbsp;/root/.forward</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>chown&nbsp;root&nbsp;/root/.forward</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>chmod&nbsp;600&nbsp;/root/.forward</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>restorecon&nbsp;/root/.forward</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>echo&nbsp;adminlogs@example.com&nbsp;&gt;&nbsp;/home/git/.forward</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>chown&nbsp;git&nbsp;/home/git/.forward</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>chmod&nbsp;600&nbsp;/home/git/.forward</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>restorecon&nbsp;/home/git/.forward</span></span></span></div></pre><h4 id="instill-ruby">Instill ruby</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Based&nbsp;on&nbsp;the&nbsp;offcial&nbsp;installation&nbsp;that&nbsp;ruby&nbsp;2.1.6&nbsp;is&nbsp;the&nbsp;supported&nbsp;version</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>tar&nbsp;xvf&nbsp;ruby-2.1.6.tar.gz</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;ruby-2.1.6</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make&nbsp;install</span></span></span></div></pre><h4 id="configure-gitlab-gitlab-shell-etc">Configure GitLab, Gitlab-shell, etc</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>This&nbsp;is&nbsp;the&nbsp;directory&nbsp;structure&nbsp;you&nbsp;will&nbsp;end&nbsp;up&nbsp;with&nbsp;following&nbsp;the&nbsp;instructions&nbsp;in&nbsp;the&nbsp;Installation&nbsp;Guide.</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span><span class="meta paragraph text"><span>|--&nbsp;home</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;|&nbsp;&nbsp;&nbsp;|--&nbsp;git</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--&nbsp;.ssh</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--&nbsp;gitlab</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--&nbsp;gitlab-satellites</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--&nbsp;gitlab-shell</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--&nbsp;repositories</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>/home/git/.ssh&nbsp;-&nbsp;contains&nbsp;openssh&nbsp;settings.&nbsp;Specifically&nbsp;the&nbsp;authorized_keys&nbsp;file&nbsp;managed&nbsp;by&nbsp;gitlab-shell.</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>/home/git/gitlab&nbsp;-&nbsp;GitLab&nbsp;core&nbsp;software.</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>/home/git/gitlab-satellites&nbsp;-&nbsp;checked&nbsp;out&nbsp;repositories&nbsp;for&nbsp;merge&nbsp;requests&nbsp;and&nbsp;file&nbsp;editing&nbsp;from&nbsp;web&nbsp;UI.&nbsp;This&nbsp;can&nbsp;be&nbsp;treated&nbsp;as&nbsp;a&nbsp;temporary&nbsp;files&nbsp;directory.</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>/home/git/gitlab-shell&nbsp;-&nbsp;Core&nbsp;add-on&nbsp;component&nbsp;of&nbsp;GitLab.&nbsp;Maintains&nbsp;SSH&nbsp;cloning&nbsp;and&nbsp;other&nbsp;functionality.</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>/home/git/repositories&nbsp;-&nbsp;bare&nbsp;repositories&nbsp;for&nbsp;all&nbsp;projects&nbsp;organized&nbsp;by&nbsp;namespace.&nbsp;This&nbsp;is&nbsp;where&nbsp;the&nbsp;git&nbsp;repositories&nbsp;which&nbsp;are&nbsp;pushed/pulled&nbsp;are&nbsp;maintained&nbsp;for&nbsp;all&nbsp;projects.&nbsp;This&nbsp;area&nbsp;is&nbsp;critical&nbsp;data&nbsp;for&nbsp;projects.&nbsp;Keep&nbsp;a&nbsp;backup</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Note:&nbsp;the&nbsp;default&nbsp;locations&nbsp;for&nbsp;gitlab-satellites&nbsp;and&nbsp;repositories&nbsp;can&nbsp;be&nbsp;configured&nbsp;in&nbsp;config/gitlab.yml&nbsp;of&nbsp;GitLab&nbsp;and&nbsp;config.yml&nbsp;of&nbsp;gitlab-shell.</span></span></span></div></pre><h4 id="configuration-details">Configuration details</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Gitlab-shell</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>ln&nbsp;-s&nbsp;gitlabhq-7-13-stable&nbsp;gitlab</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>ln&nbsp;-s&nbsp;gitlab-shell-master&nbsp;gitlab-shell</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;gitlab-shell</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cp&nbsp;config.yml.example&nbsp;config.yml</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;gitlab_url,&nbsp;check&nbsp;the&nbsp;introduciton&nbsp;for&nbsp;advise</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sed&nbsp;-i&nbsp;&#39;s#^gitlab_url:&nbsp;.*#gitlab_url:&nbsp;&quot;</span><span class="markup underline link http hyperlink"><span>http://localhost:8080/</span></span><span>&quot;#g&#39;&nbsp;config.yml</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;redis&nbsp;path&nbsp;(orignal:&nbsp;/usr/bin/redis-cli)</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sed&nbsp;-i&nbsp;&#39;s#bin:&nbsp;.*#bin:&nbsp;/opt/redis/redis-3.0.3/src/redis-cli&#39;&nbsp;config.xml</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;repos_path</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sed&nbsp;-i&nbsp;&#39;s#^repos_path:&nbsp;.*#repos_path:&nbsp;&quot;/data/git/repositories&quot;#g&#39;&nbsp;config.yml</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;log&nbsp;file&nbsp;path</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>mkdir&nbsp;/opt/git/gitlab-shell/log/</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>chown&nbsp;git:git&nbsp;/opt/git/gitlab-shell/log/&nbsp;-R</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>chmod&nbsp;-R&nbsp;u+rwX,go-w&nbsp;/opt/git/gitlab-shell/log/</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sed&nbsp;-i&nbsp;&#39;s@^#&nbsp;\(log_file:&nbsp;\)&quot;/home/git/gitlab-shell/gitlab-shell.log&quot;@\1&quot;/opt/git/gitlab-shell/log/gitlab-shell.log&quot;@g&#39;&nbsp;config.yml</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Do&nbsp;setup</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>./bin/install</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;GitLab</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;gitlab</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cp&nbsp;config/gitlab.yml.example&nbsp;config/gitlab.yml</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;chown&nbsp;-R&nbsp;git&nbsp;log/</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;chown&nbsp;-R&nbsp;git&nbsp;tmp/</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;chmod&nbsp;-R&nbsp;u+rwX,go-w&nbsp;log/</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;chmod&nbsp;-R&nbsp;u+rwX&nbsp;tmp/</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;chmod&nbsp;-R&nbsp;u+rwX&nbsp;tmp/pids/</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;chmod&nbsp;-R&nbsp;u+rwX&nbsp;tmp/sockets/</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;chmod&nbsp;-R&nbsp;u+rwX&nbsp;&nbsp;public/uploads</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;the&nbsp;sed&nbsp;will&nbsp;speak&nbsp;for&nbsp;itself&nbsp;as&nbsp;regard&nbsp;of&nbsp;settings</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sed&nbsp;-i&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(.*host:\)&nbsp;localhost#\1&nbsp;gitlab.example.com#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(.*port:\)&nbsp;80#\1&nbsp;443#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(.*https:\)&nbsp;false#\1&nbsp;true#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(.*email_from:\)&nbsp;example@example.com#\1&nbsp;lvfeng@example.com#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>config/gitlab.yml</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;set&nbsp;smtp&nbsp;email&nbsp;service,</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cp&nbsp;config/initializers/smtp_settings.rb.sample&nbsp;config/initializers/smtp_settings.rb</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sed&nbsp;-i&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(address:\)&nbsp;&quot;email.server.com&quot;#\1&nbsp;&quot;mail.example.com&quot;#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(port:\)&nbsp;456#\1&nbsp;port#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(user_name:\)&nbsp;&quot;smtp&quot;#\1&nbsp;&quot;username&quot;#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(domain:\)&nbsp;&quot;gitlab.company.com&quot;#\1&nbsp;&quot;example.com&quot;#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(password:\)&nbsp;&quot;123456&quot;#\1&nbsp;&quot;secret&quot;#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>config/initializers/smtp_settings.rb</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>mkdir&nbsp;/opt/git/gitlab-satellites</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;chmod&nbsp;u+rwx,g=rx,o-rwx&nbsp;/opt/git/gitlab-satellites</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Enable&nbsp;cluster&nbsp;mode&nbsp;if&nbsp;you&nbsp;expect&nbsp;to&nbsp;have&nbsp;a&nbsp;high&nbsp;load&nbsp;instance</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Ex.&nbsp;change&nbsp;amount&nbsp;of&nbsp;workers&nbsp;to&nbsp;3&nbsp;for&nbsp;2GB&nbsp;RAM&nbsp;server</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Set&nbsp;the&nbsp;number&nbsp;of&nbsp;workers&nbsp;to&nbsp;at&nbsp;least&nbsp;the&nbsp;number&nbsp;of&nbsp;cores</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cp&nbsp;config/unicorn.rb.example&nbsp;config/unicorn.rb</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;configure&nbsp;unicorn.rb</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sed&nbsp;-i&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&quot;s#\(worker_processes\)&nbsp;3#\1&nbsp;$(nproc)#g&quot;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(working_directory\)&nbsp;&quot;/home/git/gitlab&quot;#\1&nbsp;&quot;/opt/git/gitlab&quot;#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(listen\)&nbsp;&quot;/home/git/gitlab/tmp/sockets/gitlab.socket&quot;#\1&nbsp;&quot;/opt/git/gitlab/tmp/sockets/gitlab.socket&quot;#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(pid\)&nbsp;&quot;/home/git/gitlab/tmp/pids/unicorn.pid&quot;#\1&nbsp;&quot;/opt/git/gitlab/tmp/pids/unicorn.pid&quot;#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(stderr_path\)&nbsp;&quot;/home/git/gitlab/log/unicorn.stderr.log&quot;#\1&nbsp;&quot;/opt/git/gitlab/log/unicorn.stderr.log&quot;#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(stdout_path\)&nbsp;&quot;/home/git/gitlab/log/unicorn.stdout.log&quot;#\1&nbsp;&quot;/opt/git/gitlab/log/unicorn.stdout.log&quot;#g&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>config/unicorn.rb</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Copy&nbsp;the&nbsp;example&nbsp;Rack&nbsp;attack&nbsp;config</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cp&nbsp;config/initializers/rack_attack.rb.example&nbsp;config/initializers/rack_attack.rb</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Configure&nbsp;Git&nbsp;global&nbsp;settings&nbsp;for&nbsp;git&nbsp;user,&nbsp;used&nbsp;when&nbsp;editing&nbsp;via&nbsp;web&nbsp;editor</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>git&nbsp;config&nbsp;--global&nbsp;core.autocrlf&nbsp;input</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Configure&nbsp;Redis&nbsp;connection&nbsp;settings</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cp&nbsp;config/resque.yml.example&nbsp;config/resque.yml</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Configure&nbsp;GitLab&nbsp;DB&nbsp;Settings</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;MySQL&nbsp;only:</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cp&nbsp;config/database.yml.mysql&nbsp;config/database.yml</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sed&nbsp;-i&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(.*pool:\)&nbsp;10#\1&nbsp;20#&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(.*username:\)&nbsp;git#\1&nbsp;gitlab#&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s#\(.*password:\)&nbsp;&quot;secure&nbsp;password&quot;#\1&nbsp;&quot;secret&quot;#&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s@\(.*\)#&nbsp;\(host:\)&nbsp;localhost@\1\2&nbsp;localhost@&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>-e&nbsp;&#39;s@\(.*\)#&nbsp;\(socket:\)&nbsp;/tmp/mysql.sock@\1\2&nbsp;/var/run/mysql/run/mysql.socket@&#39;&nbsp;\</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>config/database.yml</span></span></span></div></pre><h4 id="gitlab-ruby-on-rails">Gitlab ruby on Rails</h4>
<blockquote>
<p>here we start to face the ruby on rails dependency issue which worries me a lot.
In order to make life easier, I made my own wheel which.</p>
</blockquote>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Install&nbsp;the&nbsp;Bundler&nbsp;Gem&nbsp;and&nbsp;all&nbsp;the&nbsp;related&nbsp;rails&nbsp;gems</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span><span class="meta paragraph text"><span>gem&nbsp;install&nbsp;bundler&nbsp;--no-ri&nbsp;--no-rdoc</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;add&nbsp;one&nbsp;entry&nbsp;in&nbsp;your&nbsp;/etc/hosts&nbsp;file,&nbsp;it&#39;s&nbsp;intended&nbsp;to&nbsp;map&nbsp;the&nbsp;ip&nbsp;with&nbsp;a&nbsp;constant&nbsp;hostname</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;the&nbsp;ip&nbsp;address&nbsp;can&nbsp;be&nbsp;replaced&nbsp;with&nbsp;either&nbsp;an&nbsp;aceessable&nbsp;gem&nbsp;repository&nbsp;url&nbsp;or&nbsp;a&nbsp;self-constructed&nbsp;ip&nbsp;address</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>192.168.1.11&nbsp;gems</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;declare&nbsp;your&nbsp;own&nbsp;repo&nbsp;address&nbsp;for&nbsp;gem</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>[root@gitlab&nbsp;~]#&nbsp;gem&nbsp;sources&nbsp;-a&nbsp;</span><span class="markup underline link http hyperlink"><span>http://gems:9292/</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link http hyperlink"><span>http://gems:9292/</span></span><span>&nbsp;added&nbsp;to&nbsp;sources</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span><span class="meta paragraph text"><span>[root@gitlab&nbsp;~]#&nbsp;gem&nbsp;sources&nbsp;-r&nbsp;</span><span class="markup underline link https hyperlink"><span>https://rubygems.org/</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;</span><span class="markup underline link https hyperlink"><span>https://rubygems.org/</span></span><span>&nbsp;removed&nbsp;from&nbsp;sources</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;[root@gitlab&nbsp;~]#&nbsp;gem&nbsp;sources&nbsp;-l</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;***&nbsp;CURRENT&nbsp;SOURCES&nbsp;***</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link http hyperlink"><span>http://gems:9292/</span></span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span><span class="meta paragraph text"><span>[root@gitlab&nbsp;~]#&nbsp;&nbsp;gem&nbsp;install&nbsp;bundler&nbsp;--no-ri&nbsp;--no-rdoc</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;Fetching:&nbsp;bundler-1.10.6.gem&nbsp;(100%)</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;Successfully&nbsp;installed&nbsp;bundler-1.10.6</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;1&nbsp;gem&nbsp;installed</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;[root@gitlab&nbsp;~]#</span></span></span></div></pre><h4 id="install-gems">Install Gems</h4>
<p>Note: As of bundler 1.5.2, you can invoke bundle install -jN (where N the number of your processor cores) and enjoy the parallel gems installation with measurable difference in completion time (~60% faster). Check the number of your cores with nproc. For more information check this post. First make sure you have bundler &gt;= 1.5.2 (run bundle -v) as it addresses some issues that were fixed in 1.5.2.</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;For&nbsp;PostgreSQL&nbsp;(note,&nbsp;the&nbsp;option&nbsp;says&nbsp;&quot;without&nbsp;...&nbsp;mysql&quot;)</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>bundle&nbsp;install&nbsp;--deployment&nbsp;--without&nbsp;development&nbsp;test&nbsp;mysql&nbsp;aws&nbsp;kerberos</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Or&nbsp;if&nbsp;you&nbsp;use&nbsp;MySQL&nbsp;(note,&nbsp;the&nbsp;option&nbsp;says&nbsp;&quot;without&nbsp;...&nbsp;postgres&quot;)</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>bundle&nbsp;install&nbsp;--deployment&nbsp;--without&nbsp;development&nbsp;test&nbsp;postgres&nbsp;aws&nbsp;kerberos</span></span></span></div></pre><p>Note: If you want to use Kerberos for user authentication, then omit kerberos in the --without option above.</p>
<h4 id="initialize-database-and-activate-advanced-features">Initialize Database and Activate Advanced Features</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>bundle&nbsp;exec&nbsp;rake&nbsp;gitlab:setup&nbsp;RAILS_ENV=production</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Type&nbsp;&#39;yes&#39;&nbsp;to&nbsp;create&nbsp;the&nbsp;database&nbsp;tables.</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;When&nbsp;done&nbsp;you&nbsp;see&nbsp;&#39;Administrator&nbsp;account&nbsp;created:&#39;</span></span></span></div></pre><p>Note: You can set the Administrator/root password by supplying it in environmental variable GITLAB_ROOT_PASSWORD as seen below. If you don&#39;t set the password (and it is set to the default one) please wait with exposing GitLab to the public internet until the installation is done and you&#39;ve logged into the server the first time. During the first login you&#39;ll be forced to change the default password.</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>bundle&nbsp;exec&nbsp;rake&nbsp;gitlab:setup&nbsp;RAILS_ENV=production&nbsp;GITLAB_ROOT_PASSWORD=yourpassword</span></span></span></div></pre><h4 id="install-schedules">Install schedules</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Setup&nbsp;schedules</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;-u&nbsp;gitlab_ci&nbsp;-H&nbsp;bundle&nbsp;exec&nbsp;whenever&nbsp;-w&nbsp;RAILS_ENV=production</span></span></span></div></pre><h4 id="install-init-script">Install Init Script</h4>
<p>Download the init script (will be /etc/init.d/gitlab):</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;cp&nbsp;lib/support/init.d/gitlab&nbsp;/etc/init.d/gitlab</span></span></span></div></pre><p>If you installed GitLab in another directory or as a user other than the default you should change these settings in /etc/default/gitlab. Do not edit /etc/init.d/gitlab as it will be changed on upgrade.
Make GitLab start on boot:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>chkconfig&nbsp;gitlab&nbsp;on</span></span></span></div></pre><h4 id="setup-logrotate">Setup Logrotate</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;cp&nbsp;lib/support/logrotate/gitlab&nbsp;/etc/logrotate.d/gitlab</span></span></span></div></pre><h4 id="check-application-status">Check Application Status</h4>
<p>Check if GitLab and its environment are configured correctly:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;-u&nbsp;git&nbsp;-H&nbsp;bundle&nbsp;exec&nbsp;rake&nbsp;gitlab:env:info&nbsp;RAILS_ENV=production</span></span></span></div></pre><h4 id="compile-assets">Compile Assets</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;-u&nbsp;git&nbsp;-H&nbsp;bundle&nbsp;exec&nbsp;rake&nbsp;assets:precompile&nbsp;RAILS_ENV=production</span></span></span></div></pre><h4 id="start-your-gitlab-instance">Start Your GitLab Instance</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;service&nbsp;gitlab&nbsp;start</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;or</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;/etc/init.d/gitlab&nbsp;restart</span></span></span></div></pre><h3 id="nginx">Nginx</h3>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>tar&nbsp;xvf&nbsp;nginx-1.9.3.tar.gz</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;nginx-1.9.3</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>./configure&nbsp;--prefix=/opt/nginx&nbsp;--with-http_ssl_module&nbsp;--with-ipv6&nbsp;--user=nobody&nbsp;--group=nobody&nbsp;--with-threads&nbsp;--with-stream&nbsp;--with-stream_ssl_module&nbsp;--with-http_gzip_static_module&nbsp;--with-http_auth_request_module&nbsp;--with-http_random_index_module&nbsp;--with-http_secure_link_module&nbsp;--with-http_stub_status_module&nbsp;--with-http_gunzip_module&nbsp;--with-http_degradation_module</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>##&nbsp;--with-debug</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>make&nbsp;-j&nbsp;4</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;make&nbsp;install</span></span></span></div></pre><h4 id="site-configuration">Site Configuration</h4>
<p>Copy the example site config:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;cp&nbsp;lib/support/nginx/gitlab&nbsp;/etc/nginx/sites-available/gitlab</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;ln&nbsp;-s&nbsp;/etc/nginx/sites-available/gitlab&nbsp;/etc/nginx/sites-enabled/gitlab</span></span></span></div></pre><h3 id="advanced-setup-tips">Advanced Setup Tips</h3>
<h4 id="using-https">Using HTTPS</h4>
<p>To use GitLab with HTTPS:</p>
<ol>
<li>In gitlab.yml:<ol>
<li>Set the port option in section 1 to 443.</li>
<li>Set the https option in section 1 to true.</li>
</ol>
</li>
<li>In the config.yml of gitlab-shell:<ol>
<li>Set gitlab_url option to the HTTPS endpoint of GitLab (e.g. <a href="https://git.example.com">https://git.example.com</a>).</li>
<li>Set the certificates using either the ca_file or ca_path option.</li>
</ol>
</li>
<li>Use the gitlab-ssl Nginx example config instead of the gitlab config.<ol>
<li>Update YOUR_SERVER_FQDN.</li>
<li>Update ssl_certificate and ssl_certificate_key.</li>
<li>Review the configuration file and consider applying other security and performance enhancing features.</li>
</ol>
</li>
</ol>
<p>Using a self-signed certificate is discouraged but if you must use it follow the normal directions then:</p>
<ol>
<li>Generate a self-signed SSL certificate:<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>mkdir&nbsp;-p&nbsp;/etc/nginx/ssl/</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>cd&nbsp;/etc/nginx/ssl/</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;openssl&nbsp;req&nbsp;-newkey&nbsp;rsa:2048&nbsp;-x509&nbsp;-nodes&nbsp;-days&nbsp;3560&nbsp;-out&nbsp;gitlab.crt&nbsp;-keyout&nbsp;gitlab.key</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;chmod&nbsp;o-r&nbsp;gitlab.key</span></span></span></div></pre></li>
<li>In the config.yml of gitlab-shell set self_signed_cert to true.</li>
</ol>
<h4 id="tips-and-helps">Tips and Helps</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;compile&nbsp;charlock_holmes</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;rpm&nbsp;-ivh&nbsp;</span><span class="markup underline link http hyperlink"><span>http://www.muug.mb.ca/mirror/centos/6.6/os/x86_64/Packages/libicu-4.2.1-9.1.el6_2.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>sudo&nbsp;rpm&nbsp;-ivh&nbsp;</span><span class="markup underline link http hyperlink"><span>http://www.muug.mb.ca/mirror/centos/6.6/os/x86_64/Packages/libicu-devel-4.2.1-9.1.el6_2.x86_64.rpm</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>yum&nbsp;-y&nbsp;install&nbsp;patch</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>[root@gitlab&nbsp;charlock_holmes-0.6.9.4]#&nbsp;gem&nbsp;install&nbsp;charlock_holmes&nbsp;-v&nbsp;&quot;0.6.9.4&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Building&nbsp;native&nbsp;extensions.&nbsp;&nbsp;This&nbsp;could&nbsp;take&nbsp;a&nbsp;while...</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Successfully&nbsp;installed&nbsp;charlock_holmes-0.6.9.4</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Parsing&nbsp;documentation&nbsp;for&nbsp;charlock_holmes-0.6.9.4</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Installing&nbsp;ri&nbsp;documentation&nbsp;for&nbsp;charlock_holmes-0.6.9.4</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Done&nbsp;installing&nbsp;documentation&nbsp;for&nbsp;charlock_holmes&nbsp;after&nbsp;0&nbsp;seconds</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>1&nbsp;gem&nbsp;installe</span></span></span></div></pre><h4 id="others">Others</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>#&nbsp;Relative&nbsp;url&nbsp;support</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>#&nbsp;Uncomment&nbsp;and&nbsp;customize&nbsp;the&nbsp;last&nbsp;line&nbsp;to&nbsp;run&nbsp;in&nbsp;a&nbsp;non-root&nbsp;path</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;WARNING:&nbsp;We&nbsp;recommend&nbsp;creating&nbsp;a&nbsp;FQDN&nbsp;to&nbsp;host&nbsp;GitLab&nbsp;in&nbsp;a&nbsp;root&nbsp;path&nbsp;instead&nbsp;of&nbsp;this.</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Note&nbsp;that&nbsp;following&nbsp;settings&nbsp;need&nbsp;to&nbsp;be&nbsp;changed&nbsp;for&nbsp;this&nbsp;to&nbsp;work.</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;1)&nbsp;In&nbsp;your&nbsp;application.rb&nbsp;file:&nbsp;config.relative_url_root&nbsp;=&nbsp;&quot;/gitlab&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;2)&nbsp;In&nbsp;your&nbsp;gitlab.yml&nbsp;file:&nbsp;relative_url_root:&nbsp;/gitlab</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;3)&nbsp;In&nbsp;your&nbsp;unicorn.rb:&nbsp;ENV[&#39;RAILS_RELATIVE_URL_ROOT&#39;]&nbsp;=&nbsp;&quot;/gitlab&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;4)&nbsp;In&nbsp;../gitlab-shell/config.yml:&nbsp;gitlab_url:&nbsp;&quot;</span><span class="markup underline link http hyperlink"><span>http://127.0.0.1/gitlab</span></span><span>&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;5)&nbsp;In&nbsp;lib/support/nginx/gitlab&nbsp;:&nbsp;do&nbsp;not&nbsp;use&nbsp;asset&nbsp;gzipping,&nbsp;remove&nbsp;block&nbsp;starting&nbsp;with&nbsp;&quot;location&nbsp;~&nbsp;^/(assets)/&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;To&nbsp;update&nbsp;the&nbsp;path,&nbsp;run:&nbsp;sudo&nbsp;-u&nbsp;git&nbsp;-H&nbsp;bundle&nbsp;exec&nbsp;rake&nbsp;assets:precompile&nbsp;RAILS_ENV=production</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;config.relative_url_root&nbsp;=&nbsp;&quot;/gitlab&quot;</span></span></span></div></pre></body>
</html>
